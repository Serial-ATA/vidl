!function(e){function t(i){if(o[i])return o[i].exports;var n=o[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var o={};t.m=e,t.c=o,t.d=function(e,o,i){t.o(e,o)||Object.defineProperty(e,o,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(o,"a",o),o},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,o){"use strict";var i=localStorage.getItem("lastFormat");i?document.querySelector("button."+i).classList.add("checked"):(i="mp3",document.querySelector("button.mp3").classList.add("checked")),o(1)("focus-within");var n=o(2),r=document.querySelector(".url input");if(document.addEventListener("click",function(e){e.target.classList.contains("format")&&(document.querySelector("button."+i).classList.remove("checked"),e.target.classList.add("checked"),i=e.target.attributes["data-format"].value,localStorage.setItem("lastFormat",i),n.init(r.value,i))}),document.addEventListener("keydown",function(e){if(13!=e.which&&9!=e.which&&32!=e.which&&16!=e.which&&r.focus(),e.target.classList.contains("url-bar")){if(13!=e.which)return;n.init(r.value,i)}}),!!window.chrome&&!!window.chrome.webstore){var s=document.querySelector(".extension.chrome"),c=document.querySelector(".extension.chrome .extension-tooltip"),l=s.querySelector("svg");l.addEventListener("mouseenter",function(){console.log("ant"),c.classList.add("visible")}),s.addEventListener("mouseleave",function(){console.log("leaf"),c.classList.remove("visible")}),l.addEventListener("click",function(){chrome.webstore.install("https://chrome.google.com/webstore/detail/ofojemljpdnbfmjenigkncgofkcoacag",function(e){console.log(e)},function(e){console.log(e)})}),s.classList.add("visible")}},function(e,t,o){"use strict";e.exports=function(e){function t(){for(var t;t=o.pop();)t.classList.remove(e);for(var i=document.activeElement;document.hasFocus()&&"#document"!=i.nodeName;)i.classList.add(e),o.push(i),i=i.parentNode}e||(e="focus-within");var o=[];document.addEventListener("focus",t,!0),document.addEventListener("blur",t,!0)}},function(e,t,o){"use strict";var i=o(3),n=(document.querySelector(".middle-container"),document.querySelector(".url input")),r=document.querySelector("a.dl-link");e.exports={},e.exports.init=function(e,t){if("loading-view"!=i.getCurrentView()){i.changeToView("loading-view");var o=new WebSocket("wss://apividl.kasp.io/website-dl");o.onclose=function(e){"loading-view"==i.getCurrentView()&&(console.log("ws err - The server connection closed unexpectedly."),console.log(e),i.showError(e.code,"The server connection closed unexpectedly."))},o.onopen=function(e){console.log("ws open"),console.log(e);var i={url:n.value,format:t};o.send(JSON.stringify(i))},o.onmessage=function(e){var t=JSON.parse(e.data),n=t.type;"err"==n?(console.log("vidl err - "+t.msg),console.log(t),i.showError(t.code,t.msg),o.close()):"info"==n?(console.log("info"),console.log(t),t.title&&i.showTitle(t.title),t.uploader&&i.showTitle(t.uploader)):"file"==n&&(console.log("file"),console.log(t),r.setAttribute("href","https://apividl.kasp.io/dl/"+t.id),r.click(),t.lastFile&&(i.changeToView("success-view"),o.close(),setTimeout(function(){i.changeToView("format-selection")},1e3)))}}}},function(e,t,o){"use strict";var i=document.querySelector(".middle-container"),n=i.querySelector(".loading-view .spacer"),r=i.querySelector("p.title"),s=i.querySelector("p.uploader"),c=i.querySelector("p.error-message"),l=i.querySelector("p.error-code"),a="format-selection",u=void 0,d={changeToView:function(e){clearTimeout(u),a=e;var t=i.attributes["data-view"].value;i.classList.remove(t),i.querySelector("."+t).classList.remove("visible"),u=setTimeout(function(){i.classList.add(e),i.setAttribute("data-view",e),i.querySelector("."+e).classList.add("visible"),d.updateMiddleContainerHeight()},70)},getCurrentView:function(){return a},showTitle:function(e){n.classList.add("visible"),r.classList.add("visible"),r.innerHTML=e,d.updateMiddleContainerHeight()},showUploader:function(e){n.classList.add("visible"),s.classList.add("visible"),s.innerHTML=e,d.updateMiddleContainerHeight()},hideTitle:function(e){n.classList.remove("visible"),r.classList.remove("visible")},hideUploader:function(){n.classList.remove("visible"),s.classList.remove("visible")},showError:function(e,t){d.changeToView("error-view"),c.innerHTML=t,l.innerHTML="Code: "+e},updateMiddleContainerHeight:function(){var e=document.querySelector(".middle-container > .visible").clientHeight;i.style.height=e+"px"}};d.updateMiddleContainerHeight(),window.fn=d,e.exports=d}]);